<script type="text/x-handlebars">
  <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="main-container">
      <div class="navbar-header">
        {{#link-to 'index' class="navbar-brand"}}minicron{{/link-to}}
      </div>

      <ul class="nav navbar-nav">
        {{#link-to 'executions' tagName='li' href=false}}<a {{bind-attr href='view.href'}}>Executions</a>{{/link-to}}
        {{#link-to 'jobs' tagName='li' href=false}}<a {{bind-attr href='view.href'}}>Jobs</a>{{/link-to}}
        {{#link-to 'hosts' tagName='li' href=false}}<a {{bind-attr href='view.href'}}>Hosts</a>{{/link-to}}
      </ul>
    </div>
  </div>

  <div class="main-container clearfix">
    {{outlet}}
  </div>
</script>

<script type="text/x-handlebars" id="executions">
  <div class="sidebar">
    <h2>Recent Job Executions</h2>
    <div class="list-group">
      {{#each model}}
        {{#link-to 'execution' id class="list-group-item clearfix"}}
          <span class="pull-left">{{job.name}}</span>
          {{#if exit_status}}
            <span class="pull-right label label-danger" data-toggle="tooltip" data-placement="right" title="Failed">
              <span class="glyphicon glyphicon-remove"></span>
              </span>
          {{else}}
            {{#if finished_at}}
              <span class="pull-right label label-success" data-toggle="tooltip" data-placement="right" title="Successful">
                <span class="glyphicon glyphicon-ok"></span>
              </span>
            {{else}}
              <span class="pull-right label label-warning" data-toggle="tooltip" data-placement="right" title="Running">
                <span class="glyphicon glyphicon-flash"></span>
              </span>
            {{/if}}
          {{/if}}
        {{/link-to}}
      {{/each}}
    </div>
  </div>

  <div class="main-panel">
    <div class="inner">
      {{outlet}}
    </div>
  </div>
</script>

<script type="text/x-handlebars" id="executions/index">
  <p class="text-warning">Please select a job execution</p>
</script>

<script type="text/x-handlebars" id="execution">
  <h2>Job</h2>
  <p>
    <li><b>Job ID:</b> {{job.id}}</li>
    <li><b>Name:</b> {{job.name}}</li>
    <li><b>Command:</b> {{job.command}}</b></li>
    <li><b>Host:</b> {{job.host.name}}</b></li>
    <li><b>Created At:</b> {{job.created_at}}</b></li>
  </p>

  <h2>Execution</h2>
  <p>
    <li><b>Execution ID:</b> {{id}}</li>
    <li><b>Created At:</b> {{created_at}}</li>
    <li><b>Started At:</b> {{started_at}}</li>
    <li><b>Finished At:</b> {{finished_at}}</li>
    <li><b>Exit Status:</b> {{exit_status}}</li>
  </p>

  <h2>Output</h2>
  <div class="output tomorrow-night-eighties-ansi-theme">{{#each job_execution_outputs}}{{ansi_to_html output}}{{/each}}</div>
</script>

<script type="text/x-handlebars" id="jobs">
  <div class="sidebar">
    <h2>Jobs</h2>
    <div class="list-group">
      {{#each model}}
        {{#link-to 'job' id class="list-group-item"}}{{name}}{{/link-to}}
      {{/each}}
    </div>
  </div>

  <div class="main-panel">
    <div class="inner">
      {{outlet}}
    </div>
  </div>
</script>

<script type="text/x-handlebars" id="jobs/index">
  <p class="text-warning">Please select a job</p>
</script>

<script type="text/x-handlebars" id="job">
  <ul>
    <li><h2>Job</h2></li>
    <ul>
      <li><b>Job ID:</b> {{id}}</li>
      <li><b>Name:</b> {{name}}</li>
      <li><b>Command:</b> {{command}}</b></li>
      <li><b>Host:</b> {{host.name}}</b></li>
      <li><b>Created At:</b> {{created_at}}</b></li>
    </ul>
  </ul>
</script>

<script type="text/x-handlebars" id="hosts">
  <div class="sidebar">
    <h2>Hosts</h2>
    <div class="list-group">
      {{#each model}}
        {{#link-to 'host' id class="list-group-item"}}{{name}}{{/link-to}}
      {{/each}}
    </div>
  </div>

  <div class="main-panel">
    <div class="inner">
      {{outlet}}
    </div>
  </div>
</script>

<script type="text/x-handlebars" id="hosts/index">
  <p class="text-warning">Please select a host</p>
</script>

<script type="text/x-handlebars" id="host">
  <ul>
    <li><h2>Host</h2></li>
    <ul>
      <li><b>Host ID:</b> {{id}}</li>
      <li><b>Hostname:</b> {{hostname}}</li>
      <li><b>Name</b> {{name}}</b></li>
      <li><b>Created At:</b> {{created_at}}</b></li>
    </ul>

    <li><h2>Jobs</h2></li>
    <ul>
    {{#each job in jobs}}
      <li>{{#link-to 'job' job.id}}{{job.name}}{{/link-to}}</li>
    {{/each}}
    </ul>
  </ul>
</script>